SETB P2.0
SETB P2.1
MOV A, #150
MOV R1, #10
COMP1:
	CLR P1.0
	CLR P1.1
	CLR P1.2
	CLR P1.3
	
	JNB P2.2, ADICIONAR

	JB P2.0,COMP2
	JMP MOVER_DIREITA
	JMP COMP2
COMP2:
	JNB P2.3, REDUZIR

	JB P2.1,COMP1
	JMP MOVER_ESQUERDA
	JMP COMP1

ADICIONAR:
	ADD A,R1
	CJNE A,#160, COMP1
	MOV A, #150
	JMP COMP1
REDUZIR:
	SUBB A,R1
	CJNE A,#0, COMP1
	MOV A,#10
	JMP COMP2

MOVER_DIREITA:
	SETB P1.0
	CALL DELAY
	CLR P1.0
	SETB P1.1
	CALL DELAY
	CLR P1.1
	SETB P1.2
	CALL DELAY
	CLR P1.2
	SETB P1.3
	CALL DELAY
	CLR P1.3
	JMP COMP1
	
MOVER_ESQUERDA:
	SETB P1.3
	CALL DELAY
	CLR P1.3
	SETB P1.2
	CALL DELAY
	CLR P1.2
	SETB P1.1
	CALL DELAY
	CLR P1.1
	SETB P1.0
	CALL DELAY
	CLR P1.0
	JMP COMP1

DELAY: MOV R5,A
LABEL: ACALL DELAY1
       ACALL DELAY1
       ACALL DELAY1
       ACALL DELAY1
       DJNZ R5,LABEL
       RET
DELAY1: MOV R6,#10
       MOV R7,#10
LOOP1: DJNZ R6,LOOP1
LOOP2: DJNZ R7,LOOP1
       RET